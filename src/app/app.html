<div class="app-container">
  <header class="header">
    <h1 class="pointer" routerLink="/" aria-label="Home page"><img src="/logo.png" width="48px" height="48px" alt="logo"/></h1>

    <div class="header__right" *ngIf="user$ | async as user; else loginSection">
      <span class="user-name">Xin chào, {{ user.fullname }}!</span>
      <button
        mat-icon-button
        class="settings-btn"
        aria-label="settings"
        (click)="toggleSidebar()"
        [class.active]="sidebarOpen"
      >
        <mat-icon>settings</mat-icon>
      </button>
    </div>

    <ng-template #loginSection>
      <button mat-icon-button color="primary" aria-label="login" (click)="openLoginPopup()">
        <mat-icon>login</mat-icon>
      </button>
    </ng-template>
  </header>

  <main class="main-content">
    <router-outlet></router-outlet>
  </main>

  <!-- Sidebar -->
  <div
    class="sidebar-overlay"
    *ngIf="sidebarOpen"
    (click)="closeSidebar()"
  ></div>

  <aside class="sidebar" [class.open]="sidebarOpen">
    <div class="sidebar-content">
      <div class="sidebar-actions">
        <div class="sidebar-action" (click)="redirectToList()">
          <mat-icon>receipt_long</mat-icon>
          <span class="action__text">Danh sách đã chia sẻ</span>
        </div>
        <div class="sidebar-action" (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span class="action__text">Đăng xuất</span>
        </div>
      </div>
    </div>
  </aside>
</div>
